<!DOCTYPE html>
<html>
<head>
	<title>SGE - Mapa de transformadores y consumos</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>
</head>
<body style="padding-left:20px;padding-right: 20px; ">	
	
	<h2 class="title" style="color: #7a7f87; text-align: center;">SGE - Mapa de transformadores y consumos</h2>
		<hr>

	 <div id="mapa" style="height: 500px">
	 	
	 </div>
	 <hr>
	 <div>
	 </div>
</body>
<hr>
<footer style="text-align: center;background-color:grey;color:white">
    <!-- INICIO Footer -->
    #parse("/velocity/footer.html")
    #@footerSGE()
    #end
    <!-- FIN Footer -->
</footer>
</html>

<!-- INICIO CÓDIGO JAVASCRIPT MAPA -->
<script type="text/javascript">
    <!-- INICIO Mapa -->
	$( document ).ready(function() {
		mapa = L.map('mapa', {
	    center: [-34.598313, -58.463745],
	    zoom: 10,  
	    minZoom: 4,
	    maxZoom:17,
	    zoomControl:true 
		});
		L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	    attribution: ''}).addTo(mapa);
        
        #foreach($transformador in $transformadores)
            var transformadorA = L.marker([$transformador.latitud(),$transformador.longitud()]).addTo(mapa).bindPopup("$transformador.consumoInstantaneo()");
        #end
	});
    <!-- FIN Mapa -->
	
    function infoTransformador(transformador){
        return "<p>Consumo = transformador.consumoInstantaneo()</p>";
    }
    
    function onClick(param){
		var r = confirm("Ir a medrano?");
		if (r == true) {
			mapa.setView(new L.LatLng((-34.598494), (-58.420186)), parseInt(17));
		} else {
		    
		}
	}
    
    function funcionLoca(e){
        return "<p>Consumo = </p>";
	}
    
    function mostrarConsumo(e){
		var r = confirm("Ir a medrano?");
		if (r == true) {
			mapa.setView(new L.LatLng((-34.598494), (-58.420186)), parseInt(17));
		} else {
		    
		}
	}
</script>
<!-- FIN CÓDIGO JAVASCRIPT MAPA -->