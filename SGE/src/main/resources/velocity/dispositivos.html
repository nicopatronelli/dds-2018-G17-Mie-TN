<html>
	<head>	
		<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->
		<title> Portal de Clientes SGE </title>
 		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	</head>
	<body>
        <!-- Inicio menu superior-->
        #parse("/velocity/navbar_cliente.html")
        #@navBarCliente()
        #end
        <!-- Fin menu superior -->
		
		<!-- Inicio contenido de la página -->
		<div class="container">
			<h2>Dispositivos registrados</h2>
                <h4> Dispositivos Inteligentes </h4>
                    <!-- INICIO tabla de dispositivos inteligentes del cliente-->
                    <table class="table"> 
                        <thead> <!-- Encabezado de la tabla -->
                            <tr> 
                                <th>Id</th>
                                <th>Dispositivo</th>
                                <th>Consumo último mes (en kw)</th>                    
                                <th>Estado</th>
                                <th>Acciones disponibles</th>
                            </tr>
                        </thead>
                        <tbody>
                        <!-- Filas de la tabla -->
                        #foreach($dispositivo in $dispositivos)
                            #if($dispositivo.esInteligente())
                                <tr> 
                                    <td>$dispositivo.id()</td>
                                    <td>$dispositivo.nombre()</td>
                                    <td>$dispositivo.consumoUltimoPeriodo()</td>  
                                    #set($estado = $dispositivo.estado())                                    
                                    #if($estado == "AHORRO_DE_ENERGIA") 
                                    <td>AHORRO DE ENERGIA</td>
                                    #else
                                    <td>$estado</td>
                                    #end
                                    <td>
                                        #if($estado == "APAGADO" || $estado == "AHORRO_DE_ENERGIA")
                                            <form action="/dispositivo/encender" id="encender" method="post"> 
                                                    <button type="submit" name="idDispositivo" value="$dispositivo.id()" class="btn btn-primary myclass">Encender</button>
                                            </form>
                                        #end
                                    </td>
                                    <td>
                                        #if($estado == "ENCENDIDO" || $estado == "AHORRO_DE_ENERGIA")
                                            <form action="/dispositivo/apagar" id="apagar" method="post"> 
                                                    <button type="submit" name="idDispositivo" value="$dispositivo.id()" class="btn btn-primary">Apagar</button>
                                            </form>
                                        #end
                                    </td>   
                                    <td>
                                        #if($estado == "ENCENDIDO")
                                            <form action="/dispositivo/ahorro" id="ahorro" method="post"> 
                                                    <button type="submit" name="idDispositivo" value="$dispositivo.id()" class="btn btn-primary">Ahorro de energía</button>
                                            </form>
                                        #end
                                    </td>   
                                </tr>
                            #end
                        #end 
                        </tbody>
                    </table>
                    <!-- FIN tabla de dispositivos inteligentes del cliente-->    
                <br>
                <h4> Dispositivos Estándares </h4>
                    <table class="table">
                        <thead> <!-- INICIO tabla de dispositivos estandares del cliente-->
                            <tr> <!-- Encabezado de la tabla -->
                                <th>Id</th>
                                <th>Dispositivo</th>
                                <th>Horas de uso diarias</th>
                            </tr>
                        </thead>
                        <tbody>
                        <!-- Filas de la tabla -->
                        #foreach($dispositivo in $dispositivos)
                            #if(!$dispositivo.esInteligente())
                                <tr> 
                                    <td>$dispositivo.id()</td>
                                    <td>$dispositivo.nombre()</td>
                                    <td>$dispositivo.horasDeUsoDiarias()</td>						
                                </tr>
                            #end
                        #end 
                    </table> <!-- FIN tabla de dispositivos estandares del cliente--> 
        
        </div>
		<!-- Fin contenido de la página -->
		
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
	</body>
    <!-- Inicio Footer -->
        #parse("/velocity/footer.html")
        #@footerSGE()
        #end
    <!-- FIN Footer -->
</html>